<!DOCTYPE html>
<html>

<head>
    <title> Time series prediction | VARNN </title>
    <link rel="icon" href="static/images/logo-design.png">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="eleven">
        <h1>VARNN - VECTOR AUTOREGRESSIVE NEURAL NETWORK <i class="fas fa-bars" id="menu-icon"
                style="color: #020101; font-size: 23px; cursor: pointer;;float: right;margin-top: 10px; margin-right: 40px;"></i>
        </h1>
    </div>
    <div id="myNav" class="overlay">
        <div class="overlay-side overlay-side-white"></div>
        <div class="overlay-side overlay-side-black">
            <p id="logo-timesync">Time.Sync</p>
            <button type="button" id="signup-button">Sign Up</button>
            <button type="button" id="signin-button">Sign In</button>

            <div><a href="http://example.com" target="_blank" class="my-link">Lates News</a></div>
            <div><a href="http://example.com" target="_blank" class="my-link">Stock Ideas</a></div>
            <div><a href="http://example.com" target="_blank" class="my-link">Today's weather</a></div>
            <div><a href="http://example.com" target="_blank" class="my-link">Stock Forecasts </a></div>
            <div><a href="http://example.com" target="_blank" class="my-link">Earnings & Revenue</a></div>
            <div class="social-icons">
                <a href="https://www.facebook.com/minhlong020102" target="_blank"><i class="fab fa-facebook-f"></i></a>
                <a href="https://www.instagram.com/khoi.iag/" target="_blank"><i class="fab fa-instagram"></i></a>
                <a href="https://github.com/lonGDiBo/VARNN_MODEL_WEBSITE" target="_blank"><i
                        class="fab fa-github"></i></a>
                <a href="https://twitter.com/yourusername" target="_blank"><i class="fab fa-twitter"></i></a>
                <a href="https://www.linkedin.com/in/minhlongba/" target="_blank"><i class="fab fa-linkedin-in"></i></a>
            </div>

            <div id="ww_3e9735a04a280" v='1.3' loc='id'
                a='{"t":"ticker","lang":"en","sl_lpl":1,"ids":[],"font":"Arial","sl_ics":"one_a","sl_sot":"celsius","cl_bkg":"image","cl_font":"#FFFFFF","cl_cloud":"#FFFFFF","cl_persp":"#81D4FA","cl_sun":"#FFC107","cl_moon":"#FFC107","cl_thund":"#FF5722"}'>
                More forecasts: <a href="https://oneweather.org/london/30_days/" id="ww_3e9735a04a280_u"
                    target="_blank">Weather London 30 days</a></div>
            <script async src="https://app2.weatherwidget.org/js/?id=ww_3e9735a04a280"></script>
        </div>
    </div>
    <script>
        function toggleNav() {
            var overlay = document.getElementById("myNav");
            if (overlay.style.width === "100%") {
                overlay.style.width = "0%";
                document.body.style.overflow = 'auto';
            } else {
                overlay.style.width = "100%";
                document.body.style.overflow = 'hidden';
            }
        }
        document.getElementById("menu-icon").addEventListener("click", toggleNav);
        document.querySelector(".overlay-side.overlay-side-white").addEventListener("click", toggleNav);
    </script>

    <!-- Cuộn lên đầu trang khi nhấn arrowUp -->
    <button onclick="topFunction()" id="Btn-arrow-up" title="Go to top">
        <i class="fa fa-arrow-up"></i>
    </button>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            // Ẩn nút khi tải trang
            $('#Btn-arrow-up').hide();

            $(window).scroll(function () {
                if ($(this).scrollTop() > 120) {
                    $('#Btn-arrow-up').fadeIn();
                } else {
                    $('#Btn-arrow-up').fadeOut();
                }
            });

            $('#Btn-arrow-up').click(function () {
                $("html, body").animate({ scrollTop: 0 }, 600);
                return false;
            });
        });
    </script>

    <h2><i class="fas fa-ghost" style="color: #FF004D; margin-right: 10px;"></i>01. Select Data</h2>
    <form action="/data" method="post">
        <label for="data">Choose a dataset:</label>
        <select name="data" id="data">
            <option value="">-- Please choose a dataset-- </option>
            <option value="GOOGLE">STOCK- GOOGLE</option>
            <option value="APPLE">STOCK - APPLE</option>
            <option value="AMAZON">STOCK - AMAZON</option>
            <option value="Weather_WS">WEATHER - DUC</option>
            <option value="weather-HCM">WEATHER - HCM</option>
        </select>
        <script>document.getElementById('data').addEventListener('focus', function () {
                this.children[0].style.display = 'none';
            });</script>
        <input type="submit" value="Load Data">
    </form>


    {% if data %}
    <h2><i class="fas fa-ghost" style="color: #FF004D; margin-right: 10px;"></i> 02. Data overview: {{stock_name}}</h2>
    <form action="">
        <div style="margin-bottom: 10px;font-family: 'Montserrat', sans-serif; user-select: none;"><i
                class="fas fa-play" style="color: rgb(0, 140, 255); margin-right: 10px;"></i> Number of observations:
            {{count_data}}</div>
        <div style="margin-top: 30px; font-family: 'Montserrat', sans-serif; user-select: none;"><i class="fas fa-play"
                style="color: rgb(0, 140, 255); margin-right: 10px;"></i>
            Number of columns: {{num_columns}} | {{columns}}</div>
        <table id="data-table">
            {{ data | safe }}
        </table>
    </form>


    <h2><i class="fas fa-ghost" style="color: #FF004D; margin-right: 10px;"></i> 03. EDA - Exploratory Data
        Analysis <i id="toggle-form" class="material-symbols-outlined"
            style="color: #3652AD; cursor: pointer; margin-left: 15px;">visibility</i>
    </h2>
    <form id="eda-form" method="POST" action="/eda_column" style="display: none;">
        <p style="font-family: 'Montserrat', sans-serif; user-select: none;" id="selected-column">Select the column:
        </p>
        <select id="column-input" name="column">
            {% for column in columns %}
            <option value="{{ column }}">{{ column }}</option>
            {% endfor %}
        </select>
        <input id="visualize-button" type="submit" value="Visual">
        <div class="image-container">
            <img id="plot" src="static/images/Loading-Spinner.gif" alt="Plot">
        </div>
    </form>
    <script>
        document.getElementById('toggle-form').addEventListener('click', function () {
            var form = document.getElementById('eda-form');
            var icon = this;
            if (form.style.display === "none") {
                form.style.display = "block";
                icon.textContent = 'visibility_off'; // Change the icon to 'visibility_off'
                icon.style.color = "#332941";

            } else {
                form.style.display = "none";
                icon.textContent = 'visibility'; // Change the icon to 'visibility'
                icon.style.color = "#3652AD";

            }
        });
    </script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-elevatezoom/3.0.8/jquery.elevatezoom.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#eda-form").submit(function (e) {
                e.preventDefault();
                var column = $("#column-input").val();
                console.log('ten cot:', column);
                $.post("/eda_column", { column: column }, function (data) {
                    // Update part of the page with the returned data
                    $("#selected-column").text("You have selected column name: " + data.column_name);
                    $("#plot").attr("src", "/static/images/plot.png?" + new Date().getTime());
                });
            });
        });
    </script>


    <h2><i class="fas fa-ghost" style="color: #FF004D; margin-right: 10px;"></i> 04. Time series prediction</h2>
    <form class="container-form-predict">
        <div class="selection-predict">
            <div id="algorithm-selection">
                <label style="padding-left: 50px;" for="algorithm">Choose an algorithm:</label>
                <select id="algorithm" name="algorithm">
                    <option value="">-- Please choose an algorithm --</option>
                    <option value="algorithm1">VARNN</option>
                    <option value="algorithm2">FFNN</option>
                    <option value="algorithm3">LSTM</option>
                    <option value="algorithm3">VAR</option>
                    <option value="algorithm3">ARIMA</option>
                </select>
            </div>
            <script>
                document.getElementById('algorithm').addEventListener('focus', function () {
                    this.children[0].style.display = 'none';
                });
            </script>
            <div id="train-size"></div>
            <div id="test-size"></div>s
        </div>
        <div class="chart">
            <img id="plot1" src="static/images/Loading-Spinner.gif" alt="Plot">
        </div>
    </form>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            $.ajax({
                url: '/model',
                method: 'GET',
                success: function (data) {
                    $('#train-size').html('<h2>Train size:</h2> ' + data.train_length);

                    // $('#train-data').html('<h2>Train data:</h2> ' + data.train.join(', '));
                    $('#test-size').html('<h2>Test size:</h2> ' + data.test_length);
                    // $('#test-data').html('<h2>Test data:</h2> ' + data.test.join(', '));
                },
                error: function (error) {
                    console.error('Error:', error);
                }
            });
        });
    </script>









    {% endif %} <!-- Kết thúc của if load dữ liệu  -->
</body>

</html>